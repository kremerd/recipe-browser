<h2>{{ title }}</h2>
<form [formGroup]="recipeForm" (submit)="saveRecipe()">
  <mat-form-field>
    <mat-label>Titel</mat-label>
    <input matInput type="text" formControlName="title" />
  </mat-form-field>

  <mat-form-field>
    <mat-label>Beschreibung</mat-label>
    <textarea
      matInput
      type="text"
      rows="15"
      formControlName="description"
    ></textarea>
  </mat-form-field>

  <fieldset formArrayName="tags">
    <legend>Tags</legend>
    @for (tag of recipeForm.controls.tags.controls; track tag) {
    <mat-form-field>
      <mat-label>Tag</mat-label>
      <input matInput type="text" [formControlName]="$index" />
    </mat-form-field>
    <div class="button-container">
      <button matButton type="button" (click)="removeTag($index)">
        <mat-icon fontIcon="delete"></mat-icon>
        Tag entfernen
      </button>
    </div>
    }
    <div class="button-container">
      <button matButton type="button" (click)="addTag()">
        <mat-icon fontIcon="add"></mat-icon> Tag hinzufügen
      </button>
    </div>
  </fieldset>

  <fieldset formGroupName="ingredients">
    <legend>Zutaten</legend>
    @for (ingredient of recipeForm.controls.ingredients.controls; track
    ingredient) {
    <div [formArrayName]="$index">
      <mat-form-field>
        <mat-label>Anzahl</mat-label>
        <input matInput type="number" formControlName="amount" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Einheit</mat-label>
        <input matInput type="text" formControlName="unit" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Zutat</mat-label>
        <input matInput type="text" formControlName="name" />
      </mat-form-field>
      <div class="button-container">
        <button matButton type="button" (click)="removeIngredient($index)">
          <mat-icon fontIcon="delete"></mat-icon>
          Zutat entfernen
        </button>
      </div>
    </div>
    }
    <div class="button-container">
      <button matButton type="button" (click)="addIngredient()">
        <mat-icon fontIcon="add"></mat-icon> Zutat hinzufügen
      </button>
    </div>
  </fieldset>

  <div class="button-container">
    <button matButton="tonal" type="button" routerLink="..">Abbrechen</button>
    <button matButton="filled" type="submit">Speichern</button>
  </div>
</form>
